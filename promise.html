<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script src="http://dev2.nbeport.com/cdn/jquery/1.8.2/jquery-1.8.2-min.js"></script>
<script>

    // $.get("https://www.easy-mock.com/mock/5d48e3e68bdf39147cbb56d0/example1/test", function (res) {
    //     console.log(res)
    // });
    const p1 = new Promise((resolve, reject) => {
        $.get("https://www.easy-mock.com/mock/5d48e3e68bdf39147cbb56d0/example1/test", function (res) {
            console.log(1)
            resolve(res)
        });
        // setTimeout(() => {
        //         resolve('result')
        //     },
        //     1000);
    });

    p1.then(res => res, err => err).then(res => console.log("res"+res), err => console.log("err"+err))
    p1.then(res => console.log("res"+res), err => console.log("err"+err))
    function* myGenerator() {
        console.log(yield '1')  //test1
        console.log(yield '2')  //test2
        console.log(yield '3')  //test3
    }

    // 获取迭代器
    const gen = myGenerator();

    gen.next()
    gen.next('test1')
    gen.next('test2')
    gen.next('test3')
    function getSomething() {
        return "something";
    }

    async function testAsync() {
        return Promise.resolve("hello async");
    }

    async function testAsync2(a) {
        return a;
    }

    async function test() {
        const v1 = await getSomething();
        const v2 = await testAsync();
        const v3 = await testAsync2(v2);
        console.log(v1, v2,v3);
        throw new Error("1")
    }
    test().then(res=>console.log(res),res=>console.log(res))

setTimeout(()=>{
    console.log(1);
    Promise.resolve().then(console.log(2));
    console.log(3);
    Promise.resolve().then(() => {
        console.log(4)
    });
    Promise.resolve().then(() => {
        console.log(5);
        setTimeout(() => {
            console.log(6);
        }, 0)
    });
    Promise.resolve().then(setTimeout(() => {
        console.log(7);
    }, 0));
    setTimeout(() => {
        console.log(8);
    }, 0);

    const myProTest = new Promise((resolve, reject) => {
        console.log(9);
        resolve("a")
    });
    myProTest.then((res)=>{console.log(res)})

    // 123945a786
},50)



    // async function async1() {
    //     console.log('async1 start');
    //     await async2();
    //     console.log('async1 end');
    // }
    // async function async2() {
    //     //async2做出如下更改：
    //     new Promise(function(resolve) {
    //     console.log('promise1');
    //     resolve();
    // }).then(function() {
    //     console.log('promise2');
    //     });
    // }
    // console.log('script start');

    // setTimeout(function() {
    //     console.log('setTimeout');
    // }, 0)
    // async1();

    // new Promise(function(resolve) {
    //     console.log('promise3');
    //     resolve();
    // }).then(function() {
    //     console.log('promise4');
    // });

    // console.log('script end');
    // //script start
    // //async1 start
    // //promise1
    // //promise3
    // //script end
    // //promise2
    // //async1 end
    // //promise4
    // //setTimeout


    // async function async1() {
    //     console.log('async1 start');
    //     await async2();
    //     //更改如下：
    //     setTimeout(function() {
    //         console.log('setTimeout1')
    //     },0)
    // }
    // async function async2() {
    //     //更改如下：
    // 	setTimeout(function() {
    // 		console.log('setTimeout2')
    // 	},0)
    // }
    // console.log('script start');

    // setTimeout(function() {
    //     console.log('setTimeout3');
    // }, 0)
    // async1();

    // new Promise(function(resolve) {
    //     console.log('promise1');
    //     resolve();
    // }).then(function() {
    //     console.log('promise2');
    // });
    // console.log('script end');

    // //script start
    // //async1 start
    // //promise1
    // //script end
    // //promise2
    // //setTimeout3
    // //setTimeout2
    // //setTimeout1

    async function a1 () {
        console.log('a1 start')
        await a2()
        console.log('a1 end')
    }
    async function a2 () {
        console.log('a2')
    }

    console.log('script start')

    setTimeout(() => {
        console.log('setTimeout')
    }, 0)

    Promise.resolve().then(() => {
        console.log('promise1')
    })

    a1()

    let promise2 = new Promise((resolve) => {
        resolve('promise2.then')
        console.log('promise2')
    })

    promise2.then((res) => {
        console.log(res)
        Promise.resolve().then(() => {
            console.log('promise3')
        })
    })
    console.log('script end')

    //script start
    //a1 start
    //a2
    //promise2
    //script end
    //promise1
    //a1 end
    //promise2.then
    //promise3
    //setTimeout

</script>
</html>
